{
  "_format": "hh3-sol-build-info-1",
  "id": "solc-0_8_28-be63bc1b7e3eb2a4066eecfcaa44a08060565d2d",
  "solcVersion": "0.8.28",
  "solcLongVersion": "0.8.28+commit.7893614a",
  "userSourceNameMap": {
    "contracts/FileRegistry.sol": "project/contracts/FileRegistry.sol"
  },
  "input": {
    "language": "Solidity",
    "settings": {
      "evmVersion": "cancun",
      "outputSelection": {
        "*": {
          "": [
            "ast"
          ],
          "*": [
            "abi",
            "evm.bytecode",
            "evm.deployedBytecode",
            "evm.methodIdentifiers",
            "metadata"
          ]
        }
      },
      "remappings": []
    },
    "sources": {
      "project/contracts/FileRegistry.sol": {
        "content": "// SPDX-License-Identifier: MIT\r\npragma solidity ^0.8.0;\r\n\r\n/// @title FileRegistry\r\n/// @notice Store IPFS CIDs on-chain with a tiny metadata record and event\r\n/// @dev Designed to be simple and frontend-friendly (store CID off-chain via IPFS, then call storeFile)\r\ncontract FileRegistry {\r\n    struct File {\r\n        string cid;        // IPFS CID (e.g. \"bafy...\")\r\n        string name;       // optional filename or description\r\n        address uploader;  // who recorded it\r\n        uint256 timestamp; // block timestamp when recorded\r\n    }\r\n\r\n    // Mapping of uploader => array of files they've registered\r\n    mapping(address => File[]) private filesByUser;\r\n\r\n    // Global list of files (optional)\r\n    File[] private allFiles;\r\n\r\n    // Events\r\n    event FileStored(address indexed uploader, string cid, string name, uint256 timestamp, uint256 globalIndex, uint256 userIndex);\r\n\r\n    /// @notice Store a file's IPFS CID on-chain\r\n    /// @param cid The IPFS CID (string)\r\n    /// @param name Optional name or description\r\n    function storeFile(string calldata cid, string calldata name) external {\r\n        require(bytes(cid).length > 0, \"CID required\");\r\n\r\n        File memory f = File({\r\n            cid: cid,\r\n            name: name,\r\n            uploader: msg.sender,\r\n            timestamp: block.timestamp\r\n        });\r\n\r\n        // push to user's array\r\n        filesByUser[msg.sender].push(f);\r\n\r\n        // push to global array and capture indexes for event\r\n        uint256 globalIndex = allFiles.length;\r\n        allFiles.push(f);\r\n        uint256 userIndex = filesByUser[msg.sender].length - 1;\r\n\r\n        emit FileStored(msg.sender, cid, name, block.timestamp, globalIndex, userIndex);\r\n    }\r\n\r\n    /// @notice Get number of files uploaded by a user\r\n    /// @param user address to query\r\n    function getUserFileCount(address user) external view returns (uint256) {\r\n        return filesByUser[user].length;\r\n    }\r\n\r\n    /// @notice Get a single file record for a particular user by index\r\n    /// @param user address to query\r\n    /// @param index index in that user's list (0-based)\r\n    function getUserFile(address user, uint256 index) external view returns (string memory cid, string memory name, address uploader, uint256 timestamp) {\r\n        require(index < filesByUser[user].length, \"index out of bounds\");\r\n        File storage f = filesByUser[user][index];\r\n        return (f.cid, f.name, f.uploader, f.timestamp);\r\n    }\r\n\r\n    /// @notice Get global file count\r\n    function getGlobalFileCount() external view returns (uint256) {\r\n        return allFiles.length;\r\n    }\r\n\r\n    /// @notice Get a global file record by index\r\n    function getGlobalFile(uint256 index) external view returns (string memory cid, string memory name, address uploader, uint256 timestamp) {\r\n        require(index < allFiles.length, \"index out of bounds\");\r\n        File storage f = allFiles[index];\r\n        return (f.cid, f.name, f.uploader, f.timestamp);\r\n    }\r\n}\r\n"
      }
    }
  }
}